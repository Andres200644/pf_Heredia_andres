(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3264],{91296:function(e,t,a){var n=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt,s="object"==typeof a.g&&a.g&&a.g.Object===Object&&a.g,c="object"==typeof self&&self&&self.Object===Object&&self,d=s||c||Function("return this")(),p=Object.prototype.toString,u=Math.max,m=Math.min,g=function(){return d.Date.now()};function h(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function b(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==p.call(e)}(e))return NaN;if(h(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=h(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var a=r.test(e);return a||o.test(e)?l(e.slice(2),a?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,a){var n,i,r,o,l,s,c=0,d=!1,p=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var a=n,r=i;return n=i=void 0,c=t,o=e.apply(r,a)}function C(e){return c=e,l=setTimeout(O,t),d?v(e):o}function y(e){var a=e-s;return void 0===s||a>=t||a<0||p&&e-c>=r}function O(){var e=g();if(y(e))return T(e);l=setTimeout(O,function(e){var a=t-(e-s);return p?m(a,r-(e-c)):a}(e))}function T(e){return l=void 0,f&&n?v(e):(n=i=void 0,o)}function S(){var e=g(),a=y(e);if(n=arguments,i=this,s=e,a){if(void 0===l)return C(s);if(p)return l=setTimeout(O,t),v(s)}return void 0===l&&(l=setTimeout(O,t)),o}return t=b(t)||0,h(a)&&(d=!!a.leading,r=(p="maxWait"in a)?u(b(a.maxWait)||0,t):r,f="trailing"in a?!!a.trailing:f),S.cancel=function(){void 0!==l&&clearTimeout(l),c=0,n=s=i=l=void 0},S.flush=function(){return void 0===l?o:T(g())},S}},93264:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return we}});var n=a(92809),i=a(67294),r=a(1745),o=a(93633),l=a(85942),s=a(81223),c=a(91296),d=a.n(c),p=a(35944);const u=({id:e,dataTest:t,isLoading:a,inputGroupVariant:n,minCharactersCountToOpen:i,labels:{label:r,placeholder:o,errorMessage:l,noOptionsMessage:c,clearButtonLabel:d},leftIcon:u,rightIcon:m,clearIcon:g,ariaLabel:h,value:b,options:f,onChange:v,onClear:C,searchConfig:y,inputThemeNameSpace:O,menuThemeNameSpace:T})=>(0,p.tZ)(s.BZ,{label:r,labelId:"".concat(e,"-label"),labelFor:"".concat(e,"-input"),clearButtonLabel:d,errorMessage:l,errorMessageId:"".concat(e,"-error"),isLoading:a,hasValue:!!b,leftIcon:u,rightIcon:m,clearIcon:g,onClear:C,variant:n,themeNameSpace:O,dataTest:t,children:(0,p.tZ)(s.F2,{id:e,inputId:"".concat(e,"-input"),ariaLabel:h,ariaLabelledBy:"".concat(e,"-label"),emptyLabel:c,placeholderLabel:o,value:b,options:f,onChange:v,minCharactersCountToOpen:i,searchConfig:y,themeNameSpace:T})});u.defaultProps={isLoading:!1,inputGroupVariant:"",minCharactersCountToOpen:0,labels:{label:"",placeholder:"",errorMessage:"",noOptionsMessage:"",clearButtonLabel:""},leftIcon:"",rightIcon:"",clearIcon:"close",ariaLabel:"",value:"",options:[],onChange:()=>{},onClear:()=>{},searchConfig:{},inputThemeNameSpace:"",menuThemeNameSpace:""};var m=u;const g=({id:e,dataTest:t,ariaLabel:a,currencyCode:n,isLoading:i,labels:{label:r,placeholder:o,errorMessage:l,clearButtonLabel:c},clearIcon:d,value:u,onChange:m,onKeyUp:g,onClear:h,inputThemeNameSpace:b})=>(0,p.BX)(s.BZ,{label:r,labelId:"".concat(e,"-label"),labelFor:"".concat(e,"-input"),clearButtonLabel:c,errorMessage:l,errorMessageId:"".concat(e,"-error"),isLoading:i,hasValue:!!u,clearIcon:d,onClear:h,themeNameSpace:b,dataTest:t,children:[(0,p.tZ)(s.xu,{className:"p-1 whitespace-no-wrap",themeNameSpaces:["".concat(b,"._currencyTag")],dataTest:"".concat(t,"-icon"),children:n}),(0,p.tZ)(s.II,{id:"".concat(e,"-input"),value:u,placeholder:o,onKeyUp:e=>g(e.currentTarget.value),onChange:e=>{return t=e.currentTarget.value,/^\d*$/.test(t)?m(t):()=>{};var t},inputTheNameSpace:["".concat(b,".__inputText")],maxLength:9,pattern:null,ariaLabelledBy:"".concat(e,"-label"),ariaLabel:a})]});g.defaultProps={dataTest:"",ariaLabel:"Budget. Please enter a numerical value",currencyCode:"",isLoading:!1,labels:{label:"",placeholder:"",errorMessage:"",noOptionsMessage:"",clearButtonLabel:""},clearIcon:"",value:"",onChange:()=>{},onKeyUp:()=>{},onClear:()=>{},inputThemeNameSpace:""};var h=g;const b=({id:e,dataTest:t,isLoading:a,labels:{label:n,errorMessage:i,clearButtonLabel:r},value:o,options:l,onChange:c,selectThemeNameSpace:d,inputThemeNameSpace:u})=>(0,p.tZ)(s.BZ,{label:n,labelId:"".concat(e,"-label"),labelFor:"".concat(e,"-input"),clearButtonLabel:r,errorMessage:i,errorMessageId:"".concat(e,"-error"),isLoading:a,hasValue:!!o,themeNameSpace:u,dataTest:t,noPadding:!0,children:(0,p.tZ)(s.Ph,{name:"travel_class_filter",ariaLabel:n||"Travel Class Filter",className:"p-0",themeNameSpace:d,rightIcon:"keyboard_arrow_down",onChange:c,value:o,options:l})});b.defaultProps={dataTest:"",isLoading:!1,labels:{label:"",placeholder:"",errorMessage:"",noOptionsMessage:"",clearButtonLabel:""},value:{label:"",value:""},options:[],onChange:()=>{},selectThemeNameSpace:"",inputThemeNameSpace:""};var f=b,v=a(47428);const C=({id:e,dataTest:t,isLoading:a,labels:{label:n,errorMessage:r,toggleLabel:o,allCheckboxLabel:l,counterLabel:c,clearBtnLabel:d,applyBtnLabel:u},selectedOptions:m,options:g,onApply:h,filtersThemeNameSpace:b,inputThemeNameSpace:f})=>{const{pageInfo:{deviceType:C}}=(0,i.useContext)(v.Z);return(0,p.tZ)(s.BZ,{label:n,labelId:"".concat(e,"-label"),labelFor:"".concat(e,"-input"),errorMessage:r,errorMessageId:"".concat(e,"-error"),isLoading:a,hasValue:!!m,themeNameSpace:f,noPadding:!0,children:(0,p.tZ)(s.C2,{className:"w-full",deviceType:C,dataTest:t,labels:{toggleLabel:o,allCheckboxLabel:l,counterLabel:c,clearBtnLabel:d,applyBtnLabel:u},isLoading:!1,options:g,selectedOptions:m,onApply:h,themeNameSpace:b})})};C.defaultProps={dataTest:{},isLoading:!1,labels:{label:"",placeholder:"",errorMessage:"",noOptionsMessage:"",clearButtonLabel:""},selectedOptions:[],options:[],onApply:()=>{},filtersThemeNameSpace:"",inputThemeNameSpace:""};var y=C;const O=({sfmId:e,isLoading:t,locationAttributesFilters:a,locationAttributes:n,selectedLocationAttributes:r,handleOnApplyLocationAttrFilter:o,filtersThemeNameSpace:l,inputThemeNameSpace:c})=>{const{labels:d,pageInfo:{deviceType:u}}=(0,i.useContext)(v.Z);return a&&a.map((a=>n&&n.map((({id:n,name:i,tags:m})=>{const g="sfm-attr-filter-".concat(e,"-").concat(n),h=m&&m.map((({name:e,id:t})=>({label:e,value:t}))),b=r&&r.filter((({categoryId:e})=>e===n)).map((({tags:e})=>e&&e.map((e=>({value:e}))))).flat();return a===n&&(0,p.tZ)(s.BZ,{id:"".concat(g,"-input-group"),label:i,labelId:"".concat(g,"-label"),labelFor:"".concat(g,"-input"),errorMessageId:"".concat(g,"-error"),isLoading:t,hasValue:!!b,themeNameSpace:c,noPadding:!0,children:(0,p.tZ)(s.C2,{id:"".concat(g,"-multiselector"),className:"w-full",deviceType:u,dataTest:{toggleDataTest:"attr-filter-".concat(i,"-filter"),allCheckboxDataTest:"attr-filter-".concat(i,"-all"),optionsDataTest:"attr-filter-".concat(i,"-options"),counterDataTest:"attr-filter-".concat(i,"-counter"),clearBtnDataTest:"attr-filter-".concat(i,"-clear"),applyBtnDataTest:"attr-filter-".concat(i,"-done")},labels:{toggleLabel:null===d||void 0===d?void 0:d["cmp-attr-filter-toggle"],multiSelected:null===d||void 0===d?void 0:d["cmp-attr-filter-multiple-selected"],allCheckboxLabel:null===d||void 0===d?void 0:d["cmp-attr-filter-all"],counterLabel:null===d||void 0===d?void 0:d["cmp-attr-filter-counter-label"],clearBtnLabel:null===d||void 0===d?void 0:d["cmp-attr-filter-clear-btn"],applyBtnLabel:null===d||void 0===d?void 0:d["cmp-attr-filter-apply-btn"]},isLoading:!1,options:h,selectedOptions:b,onApply:e=>o(e,a),themeNameSpace:l})},"".concat(g,"-input-group"))}))))};O.defaultProps={dataTest:{},isLoading:!1,locationAttributesFilters:[],locationAttributes:[],selectedLocationAttributes:[],handleOnApplyLocationAttrFilter:()=>{},filtersThemeNameSpace:"",inputThemeNameSpace:""};var T=O;const S=({id:e,dataTest:t,isLoading:a,labels:{label:n,errorMessage:i,clearButtonLabel:r},value:o,options:l,onChange:c,selectThemeNameSpace:d,inputThemeNameSpace:u})=>(0,p.tZ)(s.BZ,{label:n,labelId:"".concat(e,"-label"),labelFor:"".concat(e,"-input"),clearButtonLabel:r,errorMessage:i,errorMessageId:"".concat(e,"-error"),isLoading:a,hasValue:!!o,themeNameSpace:u,dataTest:t,noPadding:!0,children:(0,p.tZ)(s.Ph,{name:"redemption_unit_filter",ariaLabel:n,className:"p-0",themeNameSpace:d,rightIcon:"keyboard_arrow_down",onChange:c,value:o,options:l})});S.defaultProps={dataTest:"",isLoading:!1,labels:{label:"",placeholder:"",errorMessage:"",noOptionsMessage:"",clearButtonLabel:""},value:{label:"",value:""},options:[],onChange:()=>{},selectThemeNameSpace:"",inputThemeNameSpace:""};var N=S;const w=({id:e,dataTest:t,isLoading:a,labels:{label:n,errorMessage:i,clearButtonLabel:r},value:o,options:l,onChange:c,selectThemeNameSpace:d,inputThemeNameSpace:u})=>(0,p.tZ)(s.BZ,{label:n,labelId:"".concat(e,"-label"),labelFor:"".concat(e,"-input"),clearButtonLabel:r,errorMessage:i,errorMessageId:"".concat(e,"-error"),isLoading:a,hasValue:!!o,themeNameSpace:u,dataTest:t,noPadding:!0,children:(0,p.tZ)(s.Ph,{name:"number_of_stops_filter",ariaLabel:n,className:"p-0",themeNameSpace:d,rightIcon:"keyboard_arrow_down",onChange:c,value:o,options:l})});w.defaultProps={dataTest:"",isLoading:!1,labels:{label:"",placeholder:"",errorMessage:"",noOptionsMessage:"",clearButtonLabel:""},value:{label:"",value:""},options:[],onChange:()=>{},selectThemeNameSpace:"",inputThemeNameSpace:""};var A=w;const F=({sfmId:e,filterSettings:t,origins:a,destinations:n,locationAttributes:r,originAirportsLoading:o,destinationAirportsLoading:l,locationAttributesLoading:c,handleOnChangeOriginFilter:d,handleOnChangeDestinationFilter:u,handleOnChangeBudgetFilter:g,handleOnChangeTravelClassFilter:b,handleOnChangeRedemptionUnitFilter:C,handleOnApplyBrandedTravelClassFilter:O,handleOnApplyLocationAttrFilter:S,handleOnChangeNumberOfStopsFilter:w,debouncedOnKeyUpHandler:F,handleOnClearOriginFilter:_,handleOnClearDestinationFilter:L,handleOnClearBudgetFilter:P,selectedOrigin:I,selectedDestination:D,budgetInputValue:M,selectedTravelClass:B,selectedBrandedTravelClasses:E,selectedLocationAttributes:Z,selectedRedemptionUnit:R,selectedNumberOfStops:k,hasLocationAttributeFilters:x,themeNameSpace:j,budgetRedemptionUnit:U,travelClassesData:V,searchConfig:$})=>{var G;const{showOriginFilter:H,showDestinationFilter:z,showBudgetFilter:K,showTravelClassFilter:q,showBrandedTravelClassFilter:Q,showRedemptionUnitFilter:X,showNumberOfStopsFilter:Y,locationAttributesFilters:W,currencyCode:J}=t,{labels:ee}=(0,i.useContext)(v.Z),{organizationDataCollection:{travelClasses:te=[],brandedTravelClasses:ae=[],redemptionUnits:ne=[]}={}}=V||{},ie=ae&&ae.filter((({travelClass:e})=>e===B)),re=W?W.length:0,oe={CURRENCY:"cmp-redemption-filter-currency",MILES:"cmp-redemption-filter-miles",POINTS:"cmp-redemption-filter-points"},le=ne&&Array.isArray(ne)?ne.map((e=>{const t=e.toUpperCase();return{value:t,label:(null===ee||void 0===ee?void 0:ee[oe[t]])||e}})):[],se=[{value:"ANY_STOPS",label:(null===ee||void 0===ee?void 0:ee["cmp-stops-filter-any-stops"])||"ANY STOPS"},{value:"MAX_ONE_STOP",label:(null===ee||void 0===ee?void 0:ee["cmp-stops-filter-max-one-stop"])||"MAX ONE STOP"},{value:"NONSTOP",label:(null===ee||void 0===ee?void 0:ee["cmp-stops-filter-nonstop"])||"NON STOP"}],ce=[H,z,K,q,Q,X,Y].filter(Boolean).length+re<=3?"md:grid-cols-3":"md:grid-cols-4",de=H||z||K||q||Q||re>0,pe=(null===ee||void 0===ee?void 0:ee["cmp-btn-clear"])||"Clear filter",ue="close",me="".concat(j,"._filters"),ge="".concat(me,"._select"),he="".concat(me,"._input"),be="".concat(me,"._locationSelector");return de&&(0,p.tZ)(s.kC,{className:"flex-row",themeNameSpaces:["".concat(j,"._container")],dataTest:"filters-container",children:(0,p.BX)("div",{className:"w-full grid grid-cols-1 gap-y-2 md:gap-x-4 ".concat(ce),children:[H&&(0,p.tZ)(m,{id:"sfm-origin-".concat(e),dataTest:"origin",leftIcon:"flight_takeoff",rightIcon:"",ariaLabel:(null===ee||void 0===ee?void 0:ee["cmp-select-origin-arialabel"])||"Input origin",isLoading:o,minCharactersCountToOpen:0,value:I,options:a,labels:{label:null===ee||void 0===ee?void 0:ee["cmp-select-origin-label"],placeholder:null===ee||void 0===ee?void 0:ee["cmp-select-origin-placeholder"],noOptionsMessage:null===ee||void 0===ee?void 0:ee["cmp-select-empty-location-selector"],clearButtonLabel:pe},clearIcon:ue,onChange:d,onClear:_,searchConfig:$,inputGroupVariant:"2",inputThemeNameSpace:he,menuThemeNameSpace:be}),z&&(0,p.tZ)(m,{id:"sfm-destination-".concat(e),dataTest:"destination",leftIcon:"flight_land",rightIcon:"",ariaLabel:(null===ee||void 0===ee?void 0:ee["cmp-select-destination-arialabel"])||"Input destination",isLoading:l,minCharactersCountToOpen:0,value:D,options:n,labels:{label:null===ee||void 0===ee?void 0:ee["cmp-select-destination-label"],placeholder:null===ee||void 0===ee?void 0:ee["cmp-select-destination-placeholder"],noOptionsMessage:null===ee||void 0===ee?void 0:ee["cmp-select-empty-location-selector"],clearButtonLabel:pe},clearIcon:ue,onChange:u,onClear:L,searchConfig:$,inputGroupVariant:"2",inputThemeNameSpace:he,menuThemeNameSpace:be}),K&&(0,p.tZ)(h,{id:"sfm-budget-".concat(e),dataTest:"budget",ariaLabel:null===ee||void 0===ee?void 0:ee["cmp-select-budget-arialabel"],currencyCode:J&&(fe=J,!fe||"MILES"!==fe&&"POINTS"!==fe?fe:ee["cmp-redemption-unit-".concat(fe.toLowerCase())]),value:M,isLoading:!1,labels:{label:null===ee||void 0===ee?void 0:ee["single-budget-label"],placeholder:null===ee||void 0===ee?void 0:ee["cmp-any-budget"],clearButtonLabel:pe},clearIcon:ue,onChange:g,onKeyUp:F,onClear:P,inputThemeNameSpace:he}),q&&(0,p.tZ)(f,{id:"sfm-travel-class-".concat(e),dataTest:"travel-class",value:B||te&&(null===(G=te[0])||void 0===G?void 0:G.value),options:te,isLoading:!1,labels:{label:null===ee||void 0===ee?void 0:ee["cmp-select-travel-class-label"]},onChange:b,selectThemeNameSpace:ge,inputThemeNameSpace:he}),Q&&(0,p.tZ)(y,{id:"sfm-branded-travel-class-".concat(e),dataTest:{toggleDataTest:"brandedTravelClass-filter",allCheckboxDataTest:"brandedTravelClass-all",optionsDataTest:"brandedTravelClass-options",counterDataTest:"brandedTravelClass-counter",clearBtnDataTest:"brandedTravelClass-clear",applyBtnDataTest:"brandedTravelClass-done"},labels:{label:null===ee||void 0===ee?void 0:ee["cmp-select-multiple-branded-travel-class-label"],toggleLabel:null===ee||void 0===ee?void 0:ee["cmp-select-multiple-branded-travel-class-toggle"],allCheckboxLabel:null===ee||void 0===ee?void 0:ee["cmp-select-multiple-branded-travel-class-all"],counterLabel:null===ee||void 0===ee?void 0:ee["cmp-select-multiple-branded-travel-class-counter-label"],clearBtnLabel:null===ee||void 0===ee?void 0:ee["cmp-select-multiple-branded-travel-class-clear-btn"],applyBtnLabel:null===ee||void 0===ee?void 0:ee["cmp-select-multiple-branded-travel-class-apply-btn"]},isLoading:!1,selectedOptions:E,options:ie,onApply:O,filtersThemeNameSpace:me,inputThemeNameSpace:he}),x&&(0,p.tZ)(T,{sfmId:e,locationAttributesFilters:W,locationAttributes:r,selectedLocationAttributes:Z,handleOnApplyLocationAttrFilter:S,isLoading:c,filtersThemeNameSpace:me,inputThemeNameSpace:he},"sfm-attr-filters-".concat(e)),X&&(0,p.tZ)(N,{id:"sfm-redemption-unit-".concat(e),dataTest:"redemption-unit",value:R,options:le,isLoading:!1,labels:{label:(null===ee||void 0===ee?void 0:ee["cmp-redemption-filter-label"])||"Display in"},onChange:C,selectThemeNameSpace:ge,inputThemeNameSpace:he}),Y&&(0,p.tZ)(A,{id:"sfm-number-of-stops-".concat(e),dataTest:"number-of-stops",value:k,options:se,isLoading:!1,labels:{label:(null===ee||void 0===ee?void 0:ee["cmp-stops-filter-label"])||"Number of stops"},onChange:w,selectThemeNameSpace:ge,inputThemeNameSpace:he})]})});var fe};F.defaultProps={sfmId:"",filterSettings:{showOriginFilter:!1,showDestinationFilter:!1,showBudgetFilter:!1,showTravelClassFilter:!1,showBrandedTravelClassFilter:!1,currencyCode:""},origins:[],destinations:[],locationAttributes:[],originAirportsLoading:!1,destinationAirportsLoading:!1,locationAttributesLoading:!1,handleOnChangeOriginFilter:()=>{},handleOnChangeDestinationFilter:()=>{},handleOnChangeBudgetFilter:()=>{},debouncedOnKeyUpHandler:()=>{},handleOnChangeTravelClassFilter:()=>{},handleOnChangeRedemptionUnitFilter:()=>{},handleOnApplyBrandedTravelClassFilter:()=>{},handleOnApplyLocationAttrFilter:()=>{},handleOnClearOriginFilter:()=>{},handleOnClearDestinationFilter:()=>{},handleOnClearBudgetFilter:()=>{},selectedOrigin:"",selectedDestination:"",budgetInputValue:"",selectedTravelClass:"",selectedBrandedTravelClasses:[],selectedLocationAttributes:[],hasLocationAttributeFilters:!1,budgetRedemptionUnit:"",travelClassesData:{},searchConfig:{caseSensitive:!1,includeScore:!1,includeMatches:!1,shouldSort:!0,findAllMatches:!0,threshold:.2,location:0,distance:300,maxPatternLength:50,minMatchCharLength:1,keys:["value","label"]}};var _=F;function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const I=({sfmId:e,componentName:t,tagName:a,filtersData:n,filterSettings:r,filterFares:o,searchOriginAirports:l,searchDestinationAirports:s,themeNameSpace:c})=>{const{showOriginFilter:u,showDestinationFilter:m,showBudgetFilter:g,showTravelClassFilter:h,showBrandedTravelClassFilter:b,showRedemptionUnitFilter:f,showNumberOfStopsFilter:C,locationAttributesFilters:y}=r,O=y&&y.length>0,{originAirports:T,originAirportsLoading:S,destinationAirports:N,destinationAirportsLoading:w,locationAttributes:A,locationAttributesLoading:F,originPrepopulationCode:L,destinationPrepopulationCode:I,budgetPrepopulationValue:D,travelClassPrepopulationValue:M,brandedTravelClassesPrepopulationValues:B,locationAttributesPrepopulation:E,redemptionUnitPrepopulationValue:Z,numberOfStopsPrepopulationValue:R,budgetRedemptionUnit:k,travelClassesData:x,searchConfig:j}=n,{actionDispatcher:U}=(0,i.useContext)(v.Z),{0:V,1:$}=(0,i.useState)(T),{0:G,1:H}=(0,i.useState)(N),{0:z,1:K}=(0,i.useState)(null),{0:q,1:Q}=(0,i.useState)(null),{0:X,1:Y}=(0,i.useState)(null),{0:W,1:J}=(0,i.useState)(null),{0:ee,1:te}=(0,i.useState)(null),{0:ae,1:ne}=(0,i.useState)(null),{0:ie,1:re}=(0,i.useState)(null),{0:oe,1:le}=(0,i.useState)(""),{0:se,1:ce}=(0,i.useState)(null),{0:de,1:pe}=(0,i.useState)(null),{0:ue,1:me}=(0,i.useState)(null),ge=()=>{K(""),ce("")},he=()=>{Q(""),pe("")},be=()=>{K(""),Q(""),l({}),s({})},fe=(0,i.useCallback)(d()((n=>{Y(n),U.dispatch({type:"PUBLISH_EVENT",payload:{name:"select_budget",data:{filter:"select-budget",componentName:t,moduleId:e,tagName:a,budget:n,date:(new Date).toISOString().slice(0,10)}}})}),1e3),[]),ve=e=>{const{geoId:t}=T.find((t=>t.value===e))||{};return t},Ce=e=>{const{geoId:t}=N.find((t=>t.value===e))||{};return t},ye=(e,t)=>e.some((({value:e})=>e===t)),Oe=()=>P(P(P(P(P(P(P(P(P(P({},u&&z?{origin:{code:z,geoId:ve(z)}}:{}),m&&q?{destination:{code:q,geoId:Ce(q)}}:{}),g&&X?{budget:{max:parseInt(X,10)}}:{}),k&&{budgetRedemptionUnit:k}),h&&W?{travelClass:W}:{}),h&&W?{travelClass:W}:{}),b&&ie&&ie.length>0?{brandedTravelClasses:ie.map((({value:e})=>e))}:{}),O&&ue&&ue.length>0?{locationAttributes:ue.map((({categoryId:e,tags:t})=>({categoryId:e,tagsIds:t})))}:{}),f&&ee?{redemptionUnit:ee}:{}),C&&ae?{numberOfStops:ae}:{}),Te=e=>{l({selectedAirportCode:e})},Se=e=>{s({selectedAirportCode:e})};return(0,i.useEffect)((()=>{L&&ce(L),I&&pe(I),D&&(le(D),Y(D)),(M&&!W||M&&M!==W)&&J(M),(Z&&!ee||Z&&Z!==ee)&&te(Z),B&&B.length>0&&!ie&&re(B.map((e=>({value:e})))),E&&E.length>0&&!ue&&me(E),(R&&!ae||R&&R!==ae)&&ne(R)}),[D,L,I,M,B,E,Z,R]),(0,i.useEffect)((()=>{T&&T.length>0&&N&&N.length>0&&($(T),H(N),se&&null===z&&ye(T,se)&&K(se),de&&null===q&&ye(N,de)&&Q(de))}),[T,N,de,se]),(0,i.useEffect)((()=>{null===z||se&&z===se||(z&&!q&&Se(z),!z&&q&&Te(q),z||q||be(),o(Oe()))}),[z]),(0,i.useEffect)((()=>{null===q||de&&q===de||(q&&!z&&Te(q),!q&&z&&Se(z),q||z||be(),o(Oe()))}),[q]),(0,i.useEffect)((()=>{null===X||D&&X===D||o(Oe())}),[X]),(0,i.useEffect)((()=>{null===W||M&&W===M||o(Oe())}),[W]),(0,i.useEffect)((()=>{null===ee||Z&&ee===Z||o(Oe())}),[ee]),(0,i.useEffect)((()=>{null!==ie&&o(Oe())}),[ie]),(0,i.useEffect)((()=>{null!==ue&&o(Oe())}),[ue]),(0,i.useEffect)((()=>{null!==ae&&o(Oe())}),[ae]),(0,p.tZ)(_,{sfmId:e,filterSettings:r,origins:V,destinations:G,locationAttributes:A,originAirportsLoading:S,destinationAirportsLoading:w,locationAttributesLoading:F,handleOnChangeOriginFilter:n=>{n!==z&&(ce(null),K(n),U.dispatch({type:"PUBLISH_EVENT",payload:{name:"select_origin",data:{filter:"select-origin",componentName:t,moduleId:e,tagName:a,origin:n,date:(new Date).toISOString().slice(0,10)}}})),""===n&&ge()},handleOnChangeDestinationFilter:n=>{n!==q&&(pe(null),Q(n),U.dispatch({type:"PUBLISH_EVENT",payload:{name:"select_destination",data:{filter:"select-destination",componentName:t,moduleId:e,tagName:a,destination:n,date:(new Date).toISOString().slice(0,10)}}})),""===n&&he()},handleOnChangeBudgetFilter:e=>{"0"!==e&&le(e)},handleOnChangeTravelClassFilter:n=>{const{value:i}=n||{};J(i),U.dispatch({type:"PUBLISH_EVENT",payload:{name:"select_fare_class",data:{filter:"select-travel-class",componentName:t,moduleId:e,tagName:a,travelClass:i,date:(new Date).toISOString().slice(0,10)}}})},handleOnChangeRedemptionUnitFilter:n=>{const{value:i}=n||{};te(i),U.dispatch({type:"PUBLISH_EVENT",payload:{name:"select_redemption",data:{filter:"select-redemption-unit",componentName:t,moduleId:e,tagName:a,travelClass:i,date:(new Date).toISOString().slice(0,10)}}})},handleOnApplyBrandedTravelClassFilter:n=>{const i=n.map((e=>({label:e,value:e})));re(i),U.dispatch({type:"PUBLISH_EVENT",payload:{name:"select_redemption",data:{filter:"select_fare_class",componentName:t,moduleId:e,tagName:a,brandedTravelClass:n,date:(new Date).toISOString().slice(0,10)}}})},handleOnApplyLocationAttrFilter:(e,t)=>{const a={categoryId:t,tags:e},n=ue&&ue.some((({categoryId:e})=>e===t));let i=[];n&&e&&0===e.length&&(i=ue.filter((({categoryId:e})=>e!==t))),n&&e&&e.length>0&&(i=ue.map((a=>a.categoryId===t?P(P({},a),{},{tags:e}):a))),!n&&ue&&(i=[...ue,a]),n||ue||(i=[a]),me(i)},handleOnChangeNumberOfStopsFilter:n=>{const{value:i}=n||{};ne(i),U.dispatch({type:"PUBLISH_EVENT",payload:{name:"select_number_of_stops",data:{filter:"select-number-of-stops",componentName:t,moduleId:e,tagName:a,numberOfStops:i,date:(new Date).toISOString().slice(0,10)}}})},debouncedOnKeyUpHandler:fe,handleOnClearOriginFilter:ge,handleOnClearDestinationFilter:he,handleOnClearBudgetFilter:()=>{le(""),Y("")},selectedOrigin:z,selectedDestination:q,budgetInputValue:oe,selectedTravelClass:W,selectedBrandedTravelClasses:ie,selectedLocationAttributes:ue,selectedRedemptionUnit:ee,selectedNumberOfStops:ae,hasLocationAttributeFilters:O,themeNameSpace:c,budgetRedemptionUnit:k,travelClassesData:x,searchConfig:j})};I.defaultProps={sfmId:"",componentName:"",tagName:"",filtersData:{airports:[],airportsLoading:!1,originPrepCode:"",destinationPrepCode:"",travelClassPrepopulationValue:"",brandedTravelClassesPrepopulationValues:[],redemptionUnitPrepopulationValue:""},filterSettings:{showOriginFilter:!1,showDestinationFilter:!1,showBudgetFilter:!1,showTravelClassFilter:!1,showBrandedTravelClassFilter:!1,hasLocationAttributeFilters:!1,showRedemptionUnitFilter:!1}};var D=I,M=a(10219),B=a(5152);const E=(0,B.default)((()=>a.e(4443).then(a.bind(a,34443))),{loadableGenerated:{webpack:()=>[34443],modules:["../atoms/widgets/StandardFareModule/parts/presentational/views/index.js -> ./ColumnsView"]}}),Z=(0,B.default)((()=>a.e(3582).then(a.bind(a,93582))),{loadableGenerated:{webpack:()=>[93582],modules:["../atoms/widgets/StandardFareModule/parts/presentational/views/index.js -> ./TableView"]}}),R=(0,B.default)((()=>Promise.all([a.e(8684),a.e(7)]).then(a.bind(a,20007))),{loadableGenerated:{webpack:()=>[20007],modules:["../atoms/widgets/StandardFareModule/parts/presentational/views/index.js -> ./CarouselView"]}}),k={COLUMNS:{viewCmp:E,viewThemeNameSpace:"_columns",viewMobile:()=>k.COLUMNS},TABLE:{viewCmp:Z,viewThemeNameSpace:"_table",viewMobile:()=>k.COLUMNS},GRID:{viewCmp:(0,B.default)((()=>a.e(7588).then(a.bind(a,37588))),{loadableGenerated:{webpack:()=>[37588],modules:["../atoms/widgets/StandardFareModule/parts/presentational/views/index.js -> ./GridView"]}}),viewThemeNameSpace:"_grid",viewMobile:()=>k.CAROUSEL},CAROUSEL:{viewCmp:R,viewThemeNameSpace:"_carousel",viewMobile:()=>k.CAROUSEL},NOFARES:{viewCmp:(0,B.default)((()=>a.e(8621).then(a.bind(a,68621))),{loadableGenerated:{webpack:()=>[68621],modules:["../atoms/widgets/StandardFareModule/parts/presentational/views/index.js -> ./NoFaresView"]}}),viewThemeNameSpace:"_noFares",viewMobile:()=>k.NOFARES}},x=["viewType","themeNameSpace"];function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}const U=e=>{let{viewType:t,themeNameSpace:a}=e,r=(0,M.Z)(e,x);const{pageInfo:{textDirection:o,deviceType:l},labels:s}=(0,i.useContext)(v.Z),{viewCmp:c,viewThemeNameSpace:d}=((e,t)=>{const a=e in k?k[e]:k.TABLE;return"desktop"===t?a:a.viewMobile()})(t,l)||{},p="RTL"===o,u={hour:null===s||void 0===s?void 0:s["cmp-hour"],hours:null===s||void 0===s?void 0:s["cmp-hours"],day:null===s||void 0===s?void 0:s["cmp-day"],days:null===s||void 0===s?void 0:s["cmp-days"],minute:null===s||void 0===s?void 0:s["cmp-minute"],minutes:null===s||void 0===s?void 0:s["cmp-minutes"]};return i.createElement(c,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({mainThemeNameSpace:a,themeNameSpace:"".concat(a,".").concat(d),isRtl:p,labels:s,units:u,deviceType:l},r))};U.defaultProps={};var V=U,$=a(45943),G=a(41075);function H(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?H(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const K=({id:e,title:t,footer:a,fares:n,viewType:r,siteEdition:o,themeNameSpace:l,onFareClick:c,showLoadMorePagination:d,filterFares:u,fetchMoreFares:m,searchOriginAirports:g,searchDestinationAirports:h,viewSettings:b,filtersData:f,filterSettings:v,networkStatus:C,showSFM:y,hasFares:O,componentName:T,tagName:S})=>{const N=(0,i.useRef)({staticTitle:t});return y&&(0,p.tZ)("div",{"data-em-sfm-id":e,"data-em-sfm-type":r,children:(0,p.BX)(s.xu,{className:"flex-col my-2",themeNameSpaces:["".concat(l)],children:[N.current.staticTitle&&(0,p.tZ)(s.xv,{as:"h2",themeNameSpaces:["".concat(l,"._title")],dataTest:"title",children:(0,$.rg)(N.current.staticTitle,{replace:{a:(e,t)=>(0,p.tZ)(s.rU,z(z({},e),{},{themeNameSpaces:["".concat(l,"._title._link")],children:t}))}})}),(0,p.tZ)(G.Z,{children:(0,p.tZ)(D,{sfmId:e,componentName:T,tagName:S,filtersData:f,filterSettings:v,filterFares:u,searchOriginAirports:g,searchDestinationAirports:h,themeNameSpace:l})}),(0,p.tZ)(G.Z,{children:(0,p.tZ)(V,{id:e,siteEdition:o,fares:n,viewType:O?r:"NOFARES",themeNameSpace:l,onFareClick:c,showLoadMorePagination:d,fetchMoreFares:m,viewSettings:b,networkStatus:C})}),a&&(0,p.tZ)(s.xv,{className:"",themeNameSpaces:["".concat(l,"._footer")],dataTest:"disclaimer",children:(0,$.rg)(a,{replace:{a:(e,t)=>(0,p.tZ)(s.rU,z(z({},e),{},{themeNameSpaces:["".concat(l,"._footer._link")],children:t}))}})})]})})};K.defaultProps={id:"",title:"",footer:"",onFareClick:()=>{},showLoadMorePagination:!1,fetchMoreFares:()=>{},themeNameSpace:"",filtersData:{airports:[],airportsLoading:!1,originPrepopulationCode:"",destinationPrepopulationCode:""},filterSettings:{showOriginFilter:!0,showDestinationFilter:!0,showBudgetFilter:!1,currencyCode:""},filterFares:()=>{},searchOriginAirports:()=>{},searchDestinationAirports:()=>{},componentName:"",tagName:""};var q,Q,X,Y,W,J,ee=K,te=a(50959),ae=a(52209),ne=a(35185);const ie=(0,ne.Ps)(q||(q=(0,ae.Z)(["\nquery ($page: PageInput!, $id: String!, $pageNumber: Int, $limit: Int, $flatContext: FlatContextInput, $urlParameters: StandardFareModuleUrlParameters, $filters: StandardFareModuleFiltersInput, $nearestOriginAirport: AirportInput) {\n  standardFareModule(page: $page, id: $id, pageNumber: $pageNumber, limit: $limit, flatContext: $flatContext, urlParameters: $urlParameters, filters: $filters, nearestOriginAirport: $nearestOriginAirport) {\n    id\n    metaData{\n        name\n        title\n        footer\n        viewType\n    }\n    visualizationSettings{\n      includeImages\n      numberOfColumns\n      textAlignment\n      showJourneyType\n      showTravelClass\n      showFareTimestamp\n      showDates\n      carouselVisualizationType\n    }\n    filterSettings{\n      showOriginFilter\n      showDestinationFilter\n      showBudgetFilter\n      showTravelClassFilter\n      showBrandedTravelClassFilter\n      locationAttributesFilters\n      validateOriginsCountryMarket\n      currencyCode\n      restrictOriginFilter\n      restrictDestinationFilter\n      showRedemptionUnitFilter\n      showNumberOfStopsFilter\n    },\n    filterRestrictions{\n      origin{\n        geoId\n        type\n      }\n      destination{\n        geoId\n        type\n      }\n    }\n    prepopulationSettings{\n      originAirportCode\n      destinationAirportCode\n      budgetMaximumAmount\n      travelClass\n      brandedTravelClasses\n      locationAttributes {\n        categoryId\n        tags\n      }\n      redemptionUnit\n      numberOfStops\n    }\n    pagination{\n          currentPage\n          from\n          to\n          lastPage\n          itemsPerPage\n          total\n    }\n    fares(pageNumber:$pageNumber, limit:$limit, urlParameters:$urlParameters, nearestOriginAirport:$nearestOriginAirport){\n      image\n      originCity\n      destinationCity\n      usdTotalPrice\n      currencyCode\n      currencySymbol\n      originAirportCode  \n      destinationAirportCode\n      formattedTravelClass\n      travelClass\n      brandedFareClass\n      farenetTravelClass\n      departureDate\n      formattedDepartureDate\n      returnDate   \n      formattedReturnDate  \n      flightType \n      formattedFlightType\n      priceLastSeen{\n        value,\n        unit\n      } \n      redemption{\n        unit\n        amount\n        taxAmount\n        category\n        formattedTaxAmount\n        formattedAmount\n        shortenedFormattedTaxAmount\n        formattedTaxAmount\n      }\n      formattedTotalPrice\n      totalPrice\n      promoCode\n    },\n    error\n  }\n }\n"]))),re=(0,ne.Ps)(Q||(Q=(0,ae.Z)(["\nquery($page: PageInput!, $filters: StandardFareModuleAirportsFilterInput!) {\n  standardFareModuleAirports(page:$page, filters:$filters){\n    airports {\n      geoId\n  \t\tvalue\n  \t\tlabel\n    }\n  }\n}\n"]))),oe=(0,ne.Ps)(X||(X=(0,ae.Z)(["\nquery ($page: PageInput!) {\n  locationAttributes(page: $page) {\n    id\n    name\n    tags {\n      id\n      name\n    }\n  }\n}\n"]))),le=(0,ne.Ps)(Y||(Y=(0,ae.Z)(["\n  query($page: PageInput!) {\n    organizationDataCollection(page: $page){\n      travelClasses {\n        label\n        value\n      }\n      brandedTravelClasses {\n        label\n        value\n        travelClass\n      }\n      redemptionUnits\n    }\n  }\n"]))),se=(0,ne.Ps)(W||(W=(0,ae.Z)(["\n  query($page: PageInput!) {\n    organizationDisplayDefault(page: $page){\n      searchConfig {\n        caseSensitive\n        includeScore\n        includeMatches\n        shouldSort\n        findAllMatches\n        threshold\n        location\n        distance\n        maxPatternLength\n        minMatchCharLength\n        keys\n        ignoreLocation\n      }\n    }\n  }\n"])));(0,ne.Ps)(J||(J=(0,ae.Z)(["\n  query($page: PageInput!) {\n    organizationDataCollection(page: $page){\n      travelClasses {\n        label\n        value\n      }\n    }\n  }\n"])));var ce=a(79647),de=a(32800),pe=a(46323),ue=a(78138),me=a.n(ue);const ge=e=>{const{datasource:t={},geo:a={}}=e||{},n={siteEditionCountryGeoId:(0,$.mR)(a,"language.site_edition_country_geo_id",null),templateId:(0,$.mR)(t,"template_id",null),templateName:(0,$.mR)(t,"step",null),originLocationLevel:(0,$.mR)(a,"location.level_origin",null),originGeoId:(0,$.mR)(a,"location.origin_geo_id",null),destinationLocationLevel:(0,$.mR)(a,"location.level_destination",null),destinationGeoId:(0,$.mR)(a,"location.destination_geo_id",null),OriginAirportName:(0,$.mR)(a,"location.user_input_origin_airport_code",null),OriginCityName:(0,$.mR)(a,"location.user_input_origin_city_name",null),OriginStateName:(0,$.mR)(a,"location.user_input_origin_state_name",null),OriginCountryName:(0,$.mR)(a,"location.user_input_origin_country_name",null),DestinationAirportName:(0,$.mR)(a,"location.user_input_destination_airport_code",null),DestinationCityName:(0,$.mR)(a,"location.user_input_destination_city_name",null),DestinationStateName:(0,$.mR)(a,"location.user_input_destination_state_name",null),DestinationCountryName:(0,$.mR)(a,"location.user_input_destination_country_name",null),fromOriginCityName:(0,$.mR)(a,"location.origin_city_preposition_from",null),fromOriginStateName:(0,$.mR)(a,"location.origin_state_preposition_from",null),fromOriginCountryName:(0,$.mR)(a,"location.origin_country_preposition_from",null),fromDestinationCityName:(0,$.mR)(a,"location.destination_city_preposition_from",null),fromDestinationStateName:(0,$.mR)(a,"location.destination_state_preposition_from",null),fromDestinationCountryName:(0,$.mR)(a,"location.destination_country_preposition_from",null),toOriginCityName:(0,$.mR)(a,"location.origin_city_preposition_to",null),toOriginStateName:(0,$.mR)(a,"location.origin_state_preposition_to",null),toOriginCountryName:(0,$.mR)(a,"location.origin_country_preposition_to",null),toDestinationCityName:(0,$.mR)(a,"location.destination_city_preposition_to",null),toDestinationStateName:(0,$.mR)(a,"location.destination_state_preposition_to",null),toDestinationCountryName:(0,$.mR)(a,"location.destination_country_preposition_to",null)};return(0,$.vQ)(n)},he=e=>{const{fare:{originAirportCode:t,origin:a,destinationAirportCode:n,destination:i,departureDate:r,returnDate:o,journeyType:l,flightType:s,siteEdition:c,currencyCode:d,travelClass:p,farenetTravelClass:u,promoCode:m,passengers:g=1,blackoutDates:h,promotions:b,accessibilityNeeds:f,redemption:v={}},tagName:C,moduleId:y}=e,{amount:O,category:T,formattedTaxAmount:S,shortenedFormattedTaxAmount:N,taxAmount:w,unit:A}=v||{};return{origin:t||a,destination:n||i,departureDate:me()(r),returnDate:o&&me()(o),siteEdition:c,currencyCode:d,journeyType:l||("ROUND_TRIP"===s||"EACH_WAY"===s?"rt":"ow"),travelClass:p,farenetTravelClass:u,promoCode:m,passengers:g,flightType:!s||"ROUND_TRIP"!==s&&"EACH_WAY"!==s?"ow":"rt",travelers:{age1:g},deeplinkSiteEdition:c,useMiles:!(null===v||void 0===v||!v.unit),blackoutDates:h,promotions:b,accessibilityNeeds:f,tagName:C,moduleId:y,redemption:{amount:O,category:T,formattedTaxAmount:S,shortenedFormattedTaxAmount:N,taxAmount:w,unit:A},redemptionType:A&&A.toLowerCase()}},be=e=>{const{module:t,moduleId:a,tenant:n,languageCode:i,fare:r,tagName:o}=e||{},{currencyCode:l,departureDate:s,returnDate:c,destinationAirportCode:d,formattedTravelClass:p,farenetTravelClass:u,travelClass:m,brandedFareClass:g,flightType:h,originAirportCode:b,totalPrice:f,usdTotalPrice:v,promoCode:C,siteEdition:y,redemption:O}=r||{},{unit:T}=O||{},S=y?y.replace(/[^-]*$/gi,(e=>e.toUpperCase())):"";return{module:t,moduleId:a,configuration:{redemptionType:T||"",fareClass:u||"",brandedFare:g||""},actionLabel:"Book Now",airlineIataCode:n,journeyType:h,origin:b,originAirportIataCode:b,destinationAirportIataCode:d,route:"".concat(b,">").concat(d),currencyCode:l,totalPrice:f,totalPriceUSD:v,fareClass:p||m,departureDate:s,returnDate:c,discountCode:C,page:[{siteEdition:S,languageIsoCode:i}],tagName:o}};var fe=a(66499),ve=a(63789),Ce=a(95573);function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const Te="price_widget",Se=({page:{tenant:e,slug:t,siteEdition:a,pageType:n,pageNumber:i,deviceType:r,languageCode:o}={}})=>({tenant:e,slug:t,siteEdition:a,pageType:n,pageNumber:i,deviceType:r,languageCode:o}),Ne=e=>{const{params:{id:t}}=e,{actionDispatcher:a,urlParameters:n}=(0,i.useContext)(v.Z),{data:s,loading:c,error:d}=(0,o.a)(te.wn),{data:u,loading:m,error:g}=(0,o.a)(te.Kr,{skip:!s,variables:{page:s&&{tenant:Se(s).tenant,slug:Se(s).slug,siteEdition:Se(s).siteEdition}}}),{pageContext:h}=u||{},b=(0,ve.Ch)(u),{template:f}=b,{geoLocation:C}=(0,ve.MV)(f),{latitude:y,longitude:O}=C,T=(0,r.SS)("geolocation"),{data:S,error:N}=(0,o.a)(te.kS,{skip:!T||(0,$.Qr)(C)||C&&C.error||m||!u,variables:Oe({page:s&&{tenant:Se(s).tenant},geo:{latitude:y,longitude:O}},b),fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",ssr:!1}),{geoLocation:{nearestOriginAirport:w={}}={}}=S||{},{geoId:A,iataCode:F}=w||{},_=(0,fe.g)(h,n),L=_&&ge(_),{user_input_origin_airport_code:P,user_input_destination_airport_code:I,budgetRedemptionUnit:D,budgetMaximumAmount:M,productType:B}=n||{},E=Oe(Oe(Oe(Oe(Oe({},P&&{origin:P}),I&&{destination:I}),B&&{fareClass:B}),D&&{budgetRedemptionUnit:D}),M&&{budget:M}),Z=!(0,$.Qr)(C)&&!(0,$.Qr)(w)&&F&&L.OriginAirportName&&F===L.OriginAirportName,{data:R,networkStatus:k,error:x,refetch:j,fetchMore:U}=(0,o.a)(ie,{skip:!s||!u,variables:Oe(Oe({page:s&&{tenant:Se(s).tenant,slug:Se(s).slug,siteEdition:Se(s).siteEdition},id:t,pageNumber:1,limit:20,flatContext:L},(0,$.Qr)(E)?{}:{urlParameters:E}),T&&Z?{nearestOriginAirport:{geoId:A,iataCode:F}}:{}),fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",notifyOnNetworkStatusChange:!0}),{page:{siteEdition:V,deviceType:H}={}}=s||{},{pageContext:{geo:{language:{site_edition_country_geo_id:z=""}={}}={}}={}}=u||{},{standardFareModule:{metaData:{title:K="",footer:q="",viewType:Q="",name:X=""}={},visualizationSettings:{includeImages:Y=!0,numberOfColumns:W=1,textAlignment:J="standard",showJourneyType:ae=!1,showTravelClass:ne=!1,showFareTimestamp:ce=!1,showDates:ue=!1,carouselVisualizationType:me="standard"}={},filterSettings:ye={},filterRestrictions:Ne={},prepopulationSettings:we={},pagination:{currentPage:Ae=1,lastPage:Fe=1,itemsPerPage:_e=10}={},fares:Le=[],error:Pe}={}}=R||{},Ie={displayImages:Y,numberOfColumns:"desktop"===H?W:1,textAlignment:J,showJourneyType:ae,showTravelClass:ne,showFareTimestamp:ce,showDates:ue,showLoadMorePagination:Ae<Fe,carouselVisualizationType:me},{showOriginFilter:De=!1,showDestinationFilter:Me=!1,showBudgetFilter:Be=!1,showTravelClassFilter:Ee=!1,showBrandedTravelClassFilter:Ze=!1,locationAttributesFilters:Re=[],validateOriginsCountryMarket:ke=!1,restrictOriginFilter:xe=!1,restrictDestinationFilter:je=!1,showRedemptionUnitFilter:Ue=!1,showNumberOfStopsFilter:Ve=!1}=ye||{},{origin:$e={},destination:Ge={}}=Ne||{},He=Re&&Re.length>0,ze=Le&&Array.isArray(Le)&&Le.length>0,Ke=ze||De||Me||Be||Ee||Ze||He||Ue||Ve,{originAirportCode:qe="",destinationAirportCode:Qe="",budgetMaximumAmount:Xe="",travelClass:Ye="",brandedTravelClasses:We=[],locationAttributes:Je=[],redemptionUnit:et="",numberOfStops:tt=""}=we||{},at=!s||!u||!De&&!Me,nt=[...ke&&z?[{name:"countryGeoId",values:[z]}]:[],...xe&&$e?[{name:null===$e||void 0===$e?void 0:$e.type,values:[null===$e||void 0===$e?void 0:$e.geoId]}]:[]],{data:it,networkStatus:rt,error:ot,refetch:lt}=(0,o.a)(re,{skip:at,variables:{page:s&&{tenant:Se(s).tenant,slug:Se(s).slug,siteEdition:Se(s).siteEdition},filters:Oe({language:s&&Se(s).languageCode,getAirportType:"ORIGIN"},nt?{filterFields:nt}:{})},fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",notifyOnNetworkStatusChange:!0,ssr:!1}),{standardFareModuleAirports:{airports:st=[]}={}}=it||{},ct=[...je&&Ge?[{name:null===Ge||void 0===Ge?void 0:Ge.type,values:[null===Ge||void 0===Ge?void 0:Ge.geoId]}]:[]],{data:dt,networkStatus:pt,error:ut,refetch:mt}=(0,o.a)(re,{skip:at,variables:{page:s&&{tenant:Se(s).tenant,slug:Se(s).slug,siteEdition:Se(s).siteEdition},filters:Oe({language:s&&Se(s).languageCode,getAirportType:"DESTINATION"},ct?{filterFields:ct}:{})},fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",notifyOnNetworkStatusChange:!0,ssr:!1}),{data:gt,error:ht}=(0,o.a)(le,{skip:!Ee&&!Ze&&!Ue,variables:{page:s&&{tenant:Se(s).tenant,slug:Se(s).slug,siteEdition:Se(s).siteEdition}},ssr:!1}),{data:bt,error:ft}=(0,o.a)(se,{skip:at,variables:{page:s&&{tenant:Se(s).tenant}},ssr:!1}),{standardFareModuleAirports:{airports:vt=[]}={}}=dt||{},{data:Ct,networkStatus:yt,error:Ot}=(0,o.a)(oe,{skip:!s||!u||!He,variables:{page:s&&{tenant:Se(s).tenant,language:Se(s).languageCode}},notifyOnNetworkStatusChange:!0}),{locationAttributes:Tt=[]}=Ct||{},{organizationDisplayDefault:{searchConfig:St={}}={}}=bt||{},Nt={originAirports:st,originAirportsLoading:"loading"===l.I[rt],destinationAirports:vt,destinationAirportsLoading:"loading"===l.I[pt],locationAttributes:Tt,locationAttributesLoading:"loading"===l.I[yt],originPrepopulationCode:P||qe,destinationPrepopulationCode:I||Qe,budgetPrepopulationValue:M||Xe,travelClassPrepopulationValue:Ye,brandedTravelClassesPrepopulationValues:We,redemptionUnitPrepopulationValue:et&&et.toUpperCase&&et.toUpperCase(),locationAttributesPrepopulation:Je,numberOfStopsPrepopulationValue:tt&&tt.toUpperCase&&tt.toUpperCase(),budgetRedemptionUnit:D,travelClassesData:gt,searchConfig:St};if(c||m||!Ke)return null;if(Pe||d||g||x||ot||ut||ht||ft||Ot||N||!s||!R){const e=!Pe&&!d&&!g&&!x&&!ot&&!ut&&!ht&&!Ot&&!N&&!R,a={page:{error:d,hasData:!!s},context:{error:g},standardFareModule:{error:x,hasData:!!R},SFMOriginAirports:{error:ot},SFMDestinationAirports:{error:ut},travelClasses:{error:ht},SFMLocationAttributes:{error:Ot},errorFromBE:{error:Pe},nearestOriginAirport:{error:N,hasData:!!S}};return(0,Ce.Z)("Standard Fare Module",a,{id:t,isMissingData:e}),null}return Ke&&(0,p.tZ)(de.Z,{trackingData:{module:Te,tagName:X,widgetId:t},children:(0,p.tZ)(pe.Z,{children:(0,p.tZ)(G.Z,{children:(0,p.tZ)(ee,{id:t,title:K,footer:q,fares:Le,viewType:Q,siteEdition:V,themeNameSpace:"_standardFareModule",onFareClick:e=>{const n=e.original;a.dispatch({type:"OPEN_POPUP",payload:he({fare:n,tagName:X,moduleId:t})}),a.dispatch({type:"TRACKING_OPEN_POPUP",payload:be({moduleId:t,module:Te,tenant:Se(s).tenant,languageCode:Se(s).languageCode,fare:n,tagName:X})})},filterFares:e=>j({filters:Oe({},e),urlParameters:{}}),fetchMoreFares:()=>Ae<Fe&&U({variables:{pageNumber:Ae+1,limit:_e}}),searchOriginAirports:({selectedAirportCode:e=null})=>lt({filters:Oe({language:Se(s).languageCode,getAirportType:"ORIGIN",selectedAirportCode:e},nt?{filterFields:nt}:{})}),searchDestinationAirports:({selectedAirportCode:e=null})=>mt({filters:Oe({language:Se(s).languageCode,getAirportType:"DESTINATION",selectedAirportCode:e},ct?{filterFields:ct}:{})}),viewSettings:Ie,filtersData:Nt,filterSettings:ye,networkStatus:l.I[k],showSFM:Ke,hasFares:ze,componentName:Te,tagName:X})})})})};var we=e=>{const{lazy:t}=e;return(0,p.tZ)("div",{"data-em-cmp":Te,children:(0,p.tZ)(ce.Z,{apply:t,children:(0,p.tZ)(Ne,Oe({},e))})})};Ne.defaultProps={params:{id:""}}}}]);